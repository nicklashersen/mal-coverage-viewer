/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package mal.coverage.viewer;

import java.io.File;

import javafx.application.Application;
import javafx.scene.Scene;
import javafx.stage.Stage;

import javafx.scene.layout.BorderPane;
import javafx.scene.control.Menu;
import javafx.scene.control.MenuBar;
import javafx.scene.control.MenuItem;

import javafx.stage.FileChooser;
import javafx.stage.FileChooser.ExtensionFilter;

// import javafx.scene.shape.Rectangle;
// import javafx.scene.paint.Color;


public class Main extends Application {
    private Stage stage;

    @Override
    public void start(Stage primaryStage) {
	BorderPane root = new BorderPane();
	MenuBar menuBar = createMenu();

	Graph graph = new Graph();

	root.setCenter(graph.getScrollPane());
	root.setTop(menuBar);

	Scene scene = new Scene(root, 1024, 769);
	scene.getStylesheets().add(getClass().getResource("application.css").toExternalForm());

	primaryStage.setScene(scene);
	primaryStage.show();

	stage = primaryStage;

	// Rectangle rect = new Rectangle(80, 30);

	// graph.cellLayer.getChildren().add(rect);

    }

    private MenuBar createMenu() {
	MenuBar menuBar = new MenuBar();

	Menu fileMenu = new Menu("File");
	MenuItem fitem1 = new MenuItem("Open");

	fitem1.setOnAction(e -> {
		FileChooser fChooser = new FileChooser();
		fChooser.setTitle("Open graph file");
		fChooser.getExtensionFilters().addAll(
		    new ExtensionFilter("JSON Files", "*.json"),
		    new ExtensionFilter("All Files", "*.*")
		);

		File selectedFile = fChooser.showOpenDialog(stage);

		if (selectedFile != null) loadFile(selectedFile);
	});

	fileMenu.getItems().add(fitem1);
	menuBar.getMenus().add(fileMenu);

	return menuBar;
    }

    private void loadFile(File file) {
    }

    public static void main(String[] args) {
        launch(args);
    }
}
